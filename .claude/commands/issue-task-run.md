---
description: Github Issueからタスクを実行し、プルリクエスト作成します[/issue-task-run xxx]
---

## context

- Pull Requestテンプレート
  @.github/pull_request_template.md

## 📋 ルール

### コミット

**重要**: 1コミットの中には一つのコンテキストにマッチするファイルのみを含め、マイクロコミットを意識する

### タスク完了時の手順

**重要**: タスクを完了した際は、必ず以下の手順を実行してください：

1. **タスクをチェック** - `- [ ]` を `- [x]` に変更
2. **完了日を追記** - `✅ **完了** (YYYY-MM-DD)` を追加
3. **関連ファイルを明記** - 作成・修正したファイル名を記載

### TDD実装ルール

1. **Red-Green-Refactorサイクル厳守**
   - テストを先に書く（Red）
   - 最小限の実装でテストを通す（Green）
   - コードを改善する（Refactor）

### テストの実行

**重要**: **全テストは実行しない**
          bin/rspecを全テスト実行してしまうと、30分くらいかかってしまうので。

**推奨テスト実行方法**:
- 関連するテストファイルのみ実行
- 例: `bundle exec rspec spec/models/affected_model_spec.rb`

## 📚 参考ドキュメント

- [関連ドキュメント一覧](@docs/ai)

## 処理フロー

### タスク作成 (Task Tool使用)
- github issue #$ARGUMENTS を参照
- このissueの内容を良く理解してタスク化してください
- TDDメソッドを使用してタスク化
- タスクはTodosで保持
- 作成したtodoをissueのコメントに追加
  - すでにissueのコメントにtodoがあった場合、内容を適切に更新
  - 追加でコメントがあり、修正指示の場合、修正指示を反映したtodoをコメント追加

### 初期設定 (Task Tool使用)
- `git fetch -a -p` を実行
- origin/developからブランチを作成
- [skip ci]付きの空コミット作成
- issueにopenされているpull requestが紐づいて存在している場合
  - 実装済み内容を確認し、実装を継続するようにする
- pull request作成（todoをチェックリスト化）
  - pull requestのテンプレート: @.github/PULL_REQUEST_TEMPLATE.md

### タスク実行 (各処理ごとにTask Toolを個別に使用)
- 実行前に `## 📋 ルール` の内容を復唱する
- 各タスクを順次実行
- TDD実装ルールに従い、テストファーストで開発
- 関連するテストのみ実行（全テストは実行しない）
- 完了後にコミット・プッシュ
- PRチェックリストを更新（ `- [ ]` → `- [x]` ）
- 完了日と関連ファイルを記載
- 未完了タスクがなくなるまで繰り返し
- タスクの戻り値として、実施した内容とPR更新結果を報告
- 次のタスクの実行に必要な情報は、それまでに実行したタスクの戻り値等を適切に使用する
- /commit

### 終了処理
- 全部終わったらプッシュ
- 完了メッセージをpull requestのコメントに追加
